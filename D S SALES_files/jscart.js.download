var shopcart=$('#shopping-cart');var currencySymbol={"ADA":"&#8371;","AED":"&#1583;.&#1573;","AFN":"Af","ALL":"L","AMD":"&#1423;","ARS":"AR$","AUD":"AU$","AZN":"&#8380;","BAM":"KM","BDT":"Tk","BGN":"&#1083;&#1074;.","BHD":"BD","BIF":"FBu","BND":"BN$","BOB":"Bs.","BRL":"R$","BTC":"B","BWP":"P","BYN":"Br","BZD":"BZ$","CAD":"CA$","CDF":"FC","CHF":"CHF","CLP":"CL$","CNY":"RMB","COP":"CO$","CRC":"&#8353;","CVE":"CVE","CZK":"K&#269;","DJF":"Fdj","DKK":"Dkr","DOP":"RD$","DZD":"DA","EEK":"Ekr","EGP":"E&#163;","ERN":"Nfk","ETB":"Br","ETH":"&#926;","EUR":"&#8364;","GBP":"&#163;","GEL":"GEL","GHS":"GH&#8373;","GNF":"FG","GTQ":"Q","HKD":"HK$","HNL":"L","HRK":"kn","HUF":"Ft","IDR":"Rp","ILS":"&#8362;","INR":"&#8377;","IQD":"&#1583;.&#1593;","IRR":"&#65020;","ISK":"&#205;kr","JMD":"J$","JOD":"JD","JPY":"&#165;","KES":"KSh","KHR":"&#6107;","KMF":"CF","KRW":"&#8361;","KWD":"KD","KZT":"&#8376;","LBP":"&#1604;.&#1604;.&#8207;","LKR":"&#8360;.","LTC":"&#321;","LTL":"Lt","LVL":"Ls","LYD":"LD","MAD":"DH","MDL":"MDL","MGA":"Ar","MKD":"den","MMK":"K","MOP":"MOP$","MUR":"&#8360;","MXN":"MEX$","MYR":"RM","MZN":"MT","NAD":"N$","NGN":"&#8358;","NIO":"C$","NOK":"Nkr","NPR":"&#2352;&#2369;","NZD":"NZ$","OMR":"&#65020;","PAB":"B/.","PEN":"S/.","PHP":"&#8369;","PKR":"&#8360;","PLN":"z&#322;","PYG":"&#8370;","QAR":"QR","RON":"RON","RSD":"din","RUB":"&#8381;","RWF":"FRw","SAR":"SR","SDG":"SD","SEK":"kr","SGD":"S$","SOS":"Sh.So.","SYP":"LS","THB":"&#3647;","TND":"DT","TOP":"T$","TRY":"&#8378;","TTD":"TT$","TWD":"NT$","TZS":"TSh","UAH":"&#8372;","UGX":"USh","USD":"$","UYU":"$U","UZS":"UZS","VEF":"Bs.F.","VND":"&#8363;","XAF":"CFA","XOF":"CFA","YER":"&#65020;","ZAR":"R","ZMK":"ZK"};if(shopcart)var _cartObj={currency:shopcart.data('currency'),deliverytype:shopcart.data('delivery-type')||null,deliverycost:shopcart.data('delivery-cost')||null,deliveryvalue:shopcart.data('delivery-value')||null,taxrate:shopcart.data('tax-rate')||null,calculate:(shopcart.data('calculate'))?true:false,name:shopcart.data('name')};else var _cartObj={};var shoppingCart=(function(e){var obj=e||{currency:'INR',deliverytype:null,deliverycost:null,deliveryvalue:null,taxrate:null,calculate:true,name:'Cart'};cart=[];function Item(id,name,quantity,unit,price,count,max,min,step,thumb){this.id=id;this.name=name||'';this.quantity=quantity||'';this.unit=unit||'';this.price=price;this.count=count;this.max=max||100;this.min=min||1;this.step=step||1;this.thumb=thumb||'';if(!this.price)obj.calculate=false;}
function saveCart(){sessionStorage.setItem('shoppingCart',JSON.stringify(cart));}
function loadCart(){cart=JSON.parse(sessionStorage.getItem('shoppingCart'));}
if(sessionStorage.getItem("shoppingCart")!=null){loadCart();}
obj.addItemToCart=function(id,name,quantity,unit,price,count,max,min,step,thumb){for(var item in cart){if(cart[item].id===id){if(cart[item].max>cart[item].count){cart[item].count+=cart[item].step;saveCart();return;}else{return;}}}
var item=new Item(id,name,quantity,unit,price,count,max,min,step,thumb);cart.push(item);saveCart();}
obj.setCountForItem=function(id,count){for(var i in cart){if(cart[i].id===id){cart[i].count=count;break;}}};obj.removeItemFromCart=function(id){for(var item in cart){if(cart[item].id===id){cart[item].count-=cart[item].step;if(cart[item].count===0||cart[item].min>cart[item].count){cart.splice(item,1);}
break;}}
saveCart();}
obj.removeItemFromCartAll=function(id){for(var item in cart){if(cart[item].id===id){cart.splice(item,1);break;}}
saveCart();}
obj.clearCart=function(){cart=[];saveCart();}
obj.totalCount=function(){var totalCount=0;for(var item in cart){totalCount+=cart[item].count;}
return totalCount;}
obj.totalCart=function(){if(!obj.calculate)return null;var totalCart=0;for(var item in cart){totalCart+=cart[item].price*cart[item].count;}
return Number(totalCart).toFixed(2);}
obj.deliveryCost=function(){if(!obj.calculate)return null;var deliveryCost=0;if((obj.deliveryvalue&&obj.deliverytype)&&obj.totalCart()>=obj.deliveryvalue)deliveryCost=0;else if(obj.deliverytype==='free')deliveryCost=0;else if(obj.deliverytype==='flat')deliveryCost=obj.deliverycost;else if(obj.deliverytype==='item')deliveryCost=obj.listCart.length*obj.deliverycost;else if(obj.deliverytype==='quantity')deliveryCost=obj.totalCount()*obj.deliverycost;else if(obj.deliverytype==='percent')deliveryCost=(obj.totalCart()/100)*obj.deliverycost;else deliveryCost=0;return Number(deliveryCost).toFixed(2);}
obj.taxCost=function(i){if(!obj.calculate)return null;if(!obj.taxrate)return 0;var taxCost=((Number(obj.totalCart())+Number(i||0))/100)*obj.taxrate;return Number(taxCost).toFixed(2);}
obj.listCart=function(){var cartCopy=[];for(i in cart){item=cart[i];itemCopy={};for(p in item){itemCopy[p]=item[p];}
itemCopy.total=(obj.calculate)?Number(item.price*item.count).toFixed(2):null;cartCopy.push(itemCopy)}
return cartCopy;}
return obj;})(_cartObj);$('.shopping-cart-add').click(function(event){event.preventDefault();var id=$(this).data('id');var name=$(this).data('name');var quantity=$(this).data('quantity');var unit=$(this).data('unit');var price=Number($(this).data('price'))||null;var max=Number($(this).data('max'))||10;var min=Number($(this).data('min'))||1;var step=Number($(this).data('step'))||1;var thumb=$(this).data('thumb');if(!price)shoppingCart.calculate=false;if(typeof pixel==='function')pixel('event','cartAdd',{'items':[{'id':id,'name':name,'quantity':1,'price':price}]});if(typeof gtag==='function')gtag('event','add_to_cart',{'items':[{'id':id,'name':name,'quantity':1,'price':price}]});if(typeof fbq==='function')fbq('track','AddToCart',{'content_name':name,'content_ids':[id],'content_type':'product','value':price,'currency':shoppingCart.currency});shoppingCart.addItemToCart(id,name,quantity,unit,price,min,max,min,step,thumb);displayCart();});$('.shopping-cart-clear').click(function(){shoppingCart.clearCart();displayCart();});function displayCart(){var cartArray=shoppingCart.listCart();var output="";var delivery=null;var home_delivery=$('#delivery-cart-toggle').is(':checked');var tax=shoppingCart.taxCost();if(cartArray.length>0){$('.shopping-cart-toggle').show();$('.shopping-cart-clear').show();$('.shopping-cart-checkout').show();}
else{$('.shopping-cart-toggle').hide();$('.shopping-cart-clear').hide();$('.shopping-cart-checkout').hide();shopcart.modal('hide');}
for(var i in cartArray){output+='<div class="row align-items-center no-gutters mb-1">'
+'<div class="col-1"><a href="#" class="delete-item text-danger small m-1" data-id="'+cartArray[i].id+'">X</a></div>'
+'<div class="col-4 col-sm-2"><img class="img-fluid img-thumbnail" src="'+cartArray[i].thumb+'"></div>'
+'<div class="col-7 col-sm-2"><b class="small">'+cartArray[i].name+'</b>'+((cartArray[i].quantity)?' <small>('+cartArray[i].quantity+' '+cartArray[i].unit+')</small>':'')+'</div>'
+'<div class="col-4 col-sm-2 text-center"><small class="text-muted">'+((shoppingCart.calculate)?currencySymbol[shoppingCart.currency]+cartArray[i].price:'')+'</small></div>'
+'<div class="col-4 col-sm-3 px-1 text-right"><div class="input-group input-group-sm">'
+'<div class="input-group-prepend"><button class="btn btn-outline-secondary minus-item" type="button" data-id="'+cartArray[i].id+'">-</button></div>'
+'<input type="number" class="form-control" length="2" data-id="'+cartArray[i].id+'" value="'+cartArray[i].count+'" max="'+cartArray[i].max+'" min="'+cartArray[i].min+'">'
+'<div class="input-group-append"><button class="btn btn-outline-secondary plus-item" type="button" data-id="'+cartArray[i].id+'">+</button></div>'
+'</div></div>'
+'<div class="col-4 col-sm-2 text-right"><small><strong>'+((shoppingCart.calculate)?currencySymbol[shoppingCart.currency]+cartArray[i].total:'')+'</strong></small></div>'
+'</div>';}
if(output!=="")$('.shopping-cart-cart').html(output);if(shoppingCart.calculate){if(home_delivery&&shoppingCart.calculate){delivery=shoppingCart.deliveryCost();tax=shoppingCart.taxCost(delivery);}
if(delivery>0&&home_delivery)$('.delivery-cart-cost').html(delivery);if(delivery==0&&home_delivery)$('.delivery-cart-cost').html('Free');if(tax>0)$('.tax-cart').html(tax);$('.total-cart').html((Number(shoppingCart.totalCart())+Number(delivery)+Number(tax)));}else{$('#delivery-cart-calculate').html('');}
$('.shopping-cart-toggle-count').html(shoppingCart.totalCount());}
$('.shopping-cart-cart').on("click",".delete-item",function(event){var id=$(this).data('id')
if(typeof pixel==='function')pixel('event','cartRemove',{'items':[{'id':id}]});if(typeof gtag==='function')gtag('event','remove_from_cart',{'items':[{'id':id}]});shoppingCart.removeItemFromCartAll(id);displayCart();})
$('.shopping-cart-cart').on("click",".minus-item",function(event){var id=$(this).data('id')
shoppingCart.removeItemFromCart(id);displayCart();})
$('.shopping-cart-cart').on("click",".plus-item",function(event){var id=$(this).data('id')
shoppingCart.addItemToCart(id);displayCart();})
$('.shopping-cart-cart').on("change",".item-count",function(event){var id=$(this).data('id');var count=Number($(this).val());shoppingCart.setCountForItem(id,count);displayCart();});$('#delivery-cart-toggle').on("change",function(event){displayCart();});$('#shopping-cart-checkIn').on('change',function(){$('#shopping-cart-checkOut').attr('min',$(this).val()).val('');})
$('.shopping-cart-whatsapp').click(function(){var cartArray=shoppingCart.listCart();var whatsapp_num=$(this).data('whatsapp');var mobile_num=$(this).data('mobile');var output=''
var delivery=0;var home_delivery=$('#delivery-cart-toggle').is(':checked');var tax=shoppingCart.taxCost();var currency=$('<textarea />').html(currencySymbol[shoppingCart.currency]).text();var j=1;if($('#hotel-cart').length){if($('#hotel-cart-name').length)output+='Name: '+$('#hotel-cart-name').val();if($('#hotel-cart-checkIn').length)output+='\r\nCheck In Date: '+$('#hotel-cart-checkIn').val();if($('#hotel-cart-checkOut').length)output+='\r\nCheck Out date: '+$('#hotel-cart-checkOut').val();if($('#hotel-cart-checkPerson').length)output+='\r\nCheck in Person: '+$('#hotel-cart-checkPerson').val();output+='\r\n\r\nRoom Booked:\r\n';}
if($('#delivery-cart').length&&home_delivery){output+='Name: '+$('#delivery-cart-name').val();output+='\r\nAddress:\r\n'+$('#delivery-cart-line1').val()+'\r\n'+$('#delivery-cart-landmark').val()+'\r\n'+$('#delivery-cart-area').val()+', '+$('#delivery-cart-city').val();output+='\r\n\r\nItem Ordered:\r\n';}
if($('#appointment-cart').length){output+='Name: '+$('#appointment-cart-name').val();output+='\r\nAppointment Date:'+$('#appointment-cart-date').val();output+='\r\nAppointment Time:'+$('#appointment-cart-time').val();output+='\r\n\r\nService Selected:\r\n';}
for(var i in cartArray){output+=j+'. '+cartArray[i].name+((cartArray[i].quantity)?' ('+cartArray[i].quantity+' '+cartArray[i].unit+')':'')+' \t'+cartArray[i].count+((shoppingCart.calculate)?'x('+currency+cartArray[i].price+')\t '+currency+(cartArray[i].price*cartArray[i].count):'')+'/-\r\n';j++;}
if(home_delivery&&shoppingCart.calculate){delivery=shoppingCart.deliveryCost();tax=shoppingCart.taxCost(delivery);}
var totalCost=null;if(shoppingCart.calculate){if(delivery>0||shoppingCart.deliverytype)output+='\r\nDelivery: '+currency+delivery+'/-\r\n';if(tax>0)output+='\r\nTax: '+currency+tax+'/-\r\n';totalCost=Number(Number(shoppingCart.totalCart())+Number(delivery)+Number(tax));output+='\r\n*Total: '+currency+Number(totalCost).toFixed(2)+'/-*';if($('#shopping-cart-checkIn').length)output+=' per Night\r\n';else output+='\r\n';}
else output+='\r\n';if(typeof pixel==='function'){var items=[];for(var i in cartArray)items.push({'id':cartArray[i].id,'name':cartArray[i].name,'quantity':cartArray[i].count,'price':cartArray[i].price});pixel('event','cartCheckout',{'cart':shoppingCart.name,'tax':tax,'shipping':delivery,'currency':shoppingCart.currency,'value':totalCost,'items':items});}
if(typeof gtag==='function'){var items=[];for(var i in cartArray)items.push({'id':cartArray[i].id,'name':cartArray[i].name,'quantity':cartArray[i].count,'price':cartArray[i].price});gtag('event','purchase',{'affiliation':shoppingCart.name,'tax':tax,'shipping':delivery,'currency':shoppingCart.currency,'value':totalCost,'items':items});}
if(typeof fbq==='function'){var items=[];for(var i in cartArray)items.push({id:cartArray[i].id,quantity:cartArray[i].count});fbq('track','Purchase',{'content_type':'product','delivery_category':(home_delivery)?'home_delivery':'in_store','value':totalCost,'currency':shoppingCart.currency,'contents':items});}
if(whatsapp_num)window.location.href="https://wa.me/"+whatsapp_num+"?text="+encodeURIComponent(output);if(mobile_num)window.location.href="sms:?&body=+"+mobile_num+"&text="+encodeURIComponent(output);shoppingCart.clearCart();displayCart();})
$('.inquire-on-whatsapp').on("click","[data-price]",function(){if(typeof pixel==='function')pixel('event','cartInquire',{'content_type':'product','items':[{'id':$(this).data('id'),'name':$(this).data('name')}]});if(typeof gtag==='function')gtag('event','select_content',{'content_type':'product','items':[{'id':$(this).data('id'),'name':$(this).data('name')}]});if(typeof fbq==='function')fbq('track','ViewContent',{'content_type':'product','content_name':$(this).data('name'),'content_ids':[$(this).data('id')],'value':$(this).data('price'),'currency':shoppingCart.currency});})
displayCart();